@page
@model NexenHub.Pages.tvModel
@{
    Layout = null;
    bool isFriday = DateTime.Now.DayOfWeek == DayOfWeek.Friday;

    bool checkLunch = DateTime.Now.Hour == 12 && DateTime.Now.Minute >= 30;
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="refresh" content="30">
    <title>@ViewData["Title"]</title>
    <link rel="stylesheet" href="/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="/css/site.css" />
</head>

<body class="" style="background-color:#000000;">
    <div class="container-fluid">


        @{
            if (!@Model.isPM && @Model.allPingOK)
            {
                <!--Space filler-->
                <div class="w-100" style="height:40vh;"></div>
            }
        }

        @{
            if (checkLunch)
            {
                <div class="alert alert-danger text-center mt-2" role="alert">
                    <h2 class="alert-heading">Objednat oběd</h2>
                </div>
            }
        }

        @{
            if (isFriday)
            {
                <div class="alert alert-danger text-center mt-2" role="alert">
                    <h2 class="alert-heading">Happy report day!</h2>
                </div>
            }
        }

        @{
            if (!@Model.isPM)
            {
                <div class="alert alert-success text-center mt-2" role="alert">
                    <h2 class="alert-heading">No PM is in progress</h2>
                </div>
            }
            else
            {
                <div class="alert alert-warning text-center mt-2" role="alert">
                    <h2 class="alert-heading">PM in progress</h2>
                </div>

                <div class="row row-cols-1 row-cols-sm-2 row-cols-md-4 row-cols-xl-5 g-2">
                    @foreach (var dev in @Model.MachinesPM)
                    {

                        <div class="col">
                            <div class="card h-100 bg-warning text-dark">
                                <div class="card-header text-center">
                                    <h3> @dev.Name</h3>
                                </div>
                                <div class="card-body text-center">
                                    <h4>@dev.Downtime</h4>
                                </div>
                            </div>
                        </div>

                    }
                </div>
            }
        }

        @{
            if (!Model.allPingOK)
            {
                <div class="alert alert-warning text-center mt-2" role="alert">
                    <h2 class="alert-heading">Unreachable devices</h2>
                </div>

                <div class="row row-cols-1 row-cols-sm-2 row-cols-md-4 row-cols-xl-5 g-2">
                    @foreach (var dev in @Model.FailPing)
                    {

                        <div class="col">
                            <div class="card h-100 bg-danger text-light">
                                <div class="card-header text-center">
                                    <h3> @dev.Name </h3>
                                </div>
                                <div class="card-body text-center">
                                    <h4>@dev.IP</h4>
                                </div>
                            </div>
                        </div>

                    }
                </div>

            }
            else
            {
                <div class="alert alert-success text-center mt-2" role="alert">
                    <h2 class="alert-heading">All NMP / ICS (@Model.PingDevices.Count) are online</h2>
                </div>
            }

        }




    </div>
</body>
</html>