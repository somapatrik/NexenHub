@model NexenHub.Models.MachineUsedMat

<div class="card">
    <div class="card-header bg-dark text-light">
        Used material
    </div>
    <div class="card-body flex-fill">
        <div id="@Html.Raw(Model.UniqeName)_Vis" />
    </div>
</div>

<style>
    .vis-item.vis-background.workorder {
        background-color: rgba(255, 215, 71, 0.2);
    }
</style>

<script type="text/javascript">

    var items = new vis.DataSet([
        @{
            int i = 0;
            foreach (var item in Model.visItems)
            {
                @Html.Raw("{id:'" + item.id + "', content:'" + item.content + "',start:'"+item.startS+"',end:'"+item.endS+"',group:'"+item.group+"'}");
                //i++;
                //if (i < Model.visItems.Count)
                @Html.Raw(",");
            }

            int k = 0;
            foreach (var item in Model.visBackground)
            {
                @Html.Raw("{id:'" + item.id + "', content:'" + item.content + "',start:'"+item.startS+"',end:'"+item.endS+ "',type: 'background', className: 'workorder'}");
                k++;
                if (k < Model.visBackground.Count)
                    @Html.Raw(",");
            }
        }

    ]);

    var groups = new vis.DataSet([
        {id:'emptygroup', content: 'WO'},
        @{
            int j = 0;
            foreach (var grp in Model.visGroups)
            {
                @Html.Raw("{id: '"+grp.id+"', content: '"+grp.content+"'}");
                j++;
                if (j < Model.visGroups.Count())
                    @Html.Raw(",");
            }
        }
    ]);

    var container = document.getElementById("@Html.Raw(Model.UniqeName)_Vis");

    var options = {
                start: "@Model.EndDate.AddHours(-3).ToString("yyyy-MM-ddTHH:mm:ss")",
                end: "@Model.EndDate.ToString("yyyy-MM-ddTHH:mm:ss")",
                editable:false
                };

    var timeline = new vis.Timeline(container);
    timeline.setOptions(options);
    timeline.setGroups(groups);
    timeline.setItems(items);

</script>

